<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="utf-8"><title># 要做什么：熟悉爬虫基础概念 - Documents</title><meta name="description" content=""><meta name="author" content=""><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><link rel="stylesheet" href="../assets/css/bulma.min.css"><link rel="stylesheet" href="../assets/css/app.css"><!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="shortcut icon" href=""></head><body dir="ltr"><nav class="columns navbar"><div class="column logo is-3 is-offset-1"><a class="is-brand" href="../index.html">Documents</a></div></nav><div class="columns content"><div class="column is-2-desktop is-3-widescreen is-hidden-touch"></div><div class="column article-container is-11-tablet is-8-desktop is-6-widescreen"><div class="breadcrumb-area"><a href="../index.html" class="breadcrumb-item">Home</a><span class="breadcrumb-delimiter"> &gt; </span><a href="../前端爬虫/index.html" class="breadcrumb-item">前端爬虫</a><span class="breadcrumb-delimiter"> &gt; </span><a href="../前端爬虫/1. 了解爬虫 - puppetter实战.html" class="breadcrumb-item">1. 了解爬虫 - puppetter实战.md</a></div><h1 class="article-title"># 要做什么：熟悉爬虫基础概念</h1><div class="article"><ul><li>传统爬虫怎么工作的：利用request包实现传统后端爬虫爬取掘金标签</li><li>前端爬虫面向的问题：前端渲染导致传统爬虫无法抓取到数据</li><li>前端爬虫怎么工作的：<ul><li>利用puppetter对百度官网进行截图</li><li>利用puppetter爬取京东，模拟搜索实现爬取京东手机列表</li></ul></li></ul><h2 id="怎么做到尽可能做到复制粘贴就能有成果">怎么做到：尽可能做到复制粘贴就能有成果 <a class="markdownIt-Anchor" href="#怎么做到尽可能做到复制粘贴就能有成果">#</a></h2><p>这里注意一定要先完成【开营计划】中的项目前置，包括了依赖安装，避免依赖版本导致的报错</p><h3 id="传统爬虫怎么工作的利用request包爬取掘金前端标签下的首页所有文章标题">传统爬虫怎么工作的：利用request包爬取掘金前端标签下的首页所有文章标题 <a class="markdownIt-Anchor" href="#传统爬虫怎么工作的利用request包爬取掘金前端标签下的首页所有文章标题">#</a></h3><h5 id="目标">目标 <a class="markdownIt-Anchor" href="#目标">#</a></h5><p>掘金前端标签下的首页所有文章标题并保存至【titles.txt】中</p><h5 id="思路">思路 <a class="markdownIt-Anchor" href="#思路">#</a></h5><ul><li>获取html：使用request包请求页面对应url从而获取</li><li>获取标题：对html字符串根据正则进行截取</li></ul><h5 id="实战">实战 <a class="markdownIt-Anchor" href="#实战">#</a></h5><p>我们先在仓库根目录下新建一个第一天实战的目录及文件<code>1.puppertee/1.js</code>（在git bash中可以直接执行如下命令）</p><pre class="hljs"><code>mkdir 1.puppertee &amp;&amp; cd 1.puppertee &amp;&amp; touch 1.js
</code></pre><p>然后实现如下内容即可</p><pre class="hljs"><code><span class="hljs-keyword">let</span> request = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;request&quot;</span>);
<span class="hljs-keyword">let</span> url = <span class="hljs-string">&quot;https://juejin.cn/tag/%E5%89%8D%E7%AB%AF&quot;</span>;
<span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>);
<span class="hljs-keyword">let</span> regexp = <span class="hljs-regexp">/class=&quot;title&quot; data-v-\w+&gt;(.+?)&lt;\/a&gt;/g</span>;

request(url, <span class="hljs-function">(<span class="hljs-params">err, response, body</span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> titles = [];
  body.replace(regexp, <span class="hljs-function">(<span class="hljs-params">matched, title</span>) =&gt;</span> {
    titles.push(title);
  });
  <span class="hljs-built_in">console</span>.log(titles);
  fs.writeFileSync(<span class="hljs-string">&quot;titles.txt&quot;</span>, titles);
});
</code></pre><p>执行如下命令查看效果</p><pre class="hljs"><code>node 1.js
</code></pre><h5 id="实现效果如下">实现效果如下 <a class="markdownIt-Anchor" href="#实现效果如下">#</a></h5><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2t2s6razmg20u010q0x3.gif" alt="2022-06-01 21.42.28" style="zoom:33%;"><h3 id="前端爬虫面向的问题前端渲染导致传统爬虫无法抓取到数据">前端爬虫面向的问题：前端渲染导致传统爬虫无法抓取到数据 <a class="markdownIt-Anchor" href="#前端爬虫面向的问题前端渲染导致传统爬虫无法抓取到数据">#</a></h3><p>这是我们提出一个需求，我们希望抓取掘金文章，你们会发现抓取不到东西，因为掘金文章是前端渲染的页面，后端接口请求时只能获取到挂载点和未执行的js文件（这就不过多解释了），那我们该怎么办？</p><p>前端爬虫！我们使用puppeteer实现前端爬虫</p><h5 id="puppeteer">puppeteer <a class="markdownIt-Anchor" href="#puppeteer">#</a></h5><ul><li>puppeteer是Chrome团队开发的一个node库</li><li>可以通过api来控制浏览器的行为，比如点击，跳转，刷新，在控制台执行js脚本等等</li><li>通过这个工具可以用来写爬虫，自动签到，网页截图，生成pdf，自动化测试等</li></ul><p>闲话不多说，实战下就知道了</p><h3 id="前端爬虫怎么工作的利用puppetter对百度官网进行截图">前端爬虫怎么工作的：利用puppetter对百度官网进行截图 <a class="markdownIt-Anchor" href="#前端爬虫怎么工作的利用puppetter对百度官网进行截图">#</a></h3><h5 id="目标-1">目标 <a class="markdownIt-Anchor" href="#目标-1">#</a></h5><p>利用puppetter打开百度官网，并对页面进行截图，存储在项目根路径</p><h5 id="思路-1">思路 <a class="markdownIt-Anchor" href="#思路-1">#</a></h5><ul><li>页面对象：puppeteer.launch可以获取一个浏览器实例，而此实例的newPage方法可以获取一个页面对象</li><li>打开百度：页面对象存在goto方法，支持跳转指定url</li><li>页面截图：页面对象存在screenshot方法，支持页面截图</li></ul><h5 id="实战-1">实战 <a class="markdownIt-Anchor" href="#实战-1">#</a></h5><p>我们先在仓库根目录下新建一个第一天实战的目录及文件<code>1.puppertee/2.js</code>（在git bash中可以直接执行如下命令）</p><pre class="hljs"><code>touch 2.js
</code></pre><p>然后实现如下内容即可</p><pre class="hljs"><code><span class="hljs-keyword">let</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;puppeteer&quot;</span>);
(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-comment">// 打开一个无界面的浏览器</span>
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.launch();
  <span class="hljs-comment">// 打开一个空白页</span>
  <span class="hljs-keyword">let</span> page = <span class="hljs-keyword">await</span> browser.newPage();
  <span class="hljs-comment">// 在地址栏中输入百度的地址</span>
  <span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">&quot;http://baidu.com&quot;</span>);
  <span class="hljs-comment">// 把当前页面进行截图 保存在baidu.png文件中</span>
  <span class="hljs-keyword">await</span> page.screenshot({
    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;baidu.png&quot;</span>,
  });
  <span class="hljs-keyword">await</span> browser.close(); <span class="hljs-comment">//关闭浏览器</span>
})();
</code></pre><p>执行如下命令查看效果</p><pre class="hljs"><code>node 2.js
</code></pre><h5 id="实现效果如下-1">实现效果如下 <a class="markdownIt-Anchor" href="#实现效果如下-1">#</a></h5><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2tcjrvvpig21sn0u046o.gif" alt="2022-06-02 03.20.24" style="zoom:33%;"><h3 id="前端爬虫怎么工作的利用puppetter爬取京东模拟搜索实现爬取京东手机列表">前端爬虫怎么工作的：利用puppetter爬取京东，模拟搜索实现爬取京东手机列表 <a class="markdownIt-Anchor" href="#前端爬虫怎么工作的利用puppetter爬取京东模拟搜索实现爬取京东手机列表">#</a></h3><h5 id="目标-2">目标 <a class="markdownIt-Anchor" href="#目标-2">#</a></h5><p>利用puppetter爬取京东，模拟搜索实现爬取京东手机列表</p><h5 id="思路-2">思路 <a class="markdownIt-Anchor" href="#思路-2">#</a></h5><ul><li>页面对象：puppeteer.launch可以获取一个浏览器实例，而此实例的newPage方法可以获取一个页面对象</li><li>打开京东：页面对象存在goto方法，支持跳转指定url</li><li>搜索手机关键词：页面对象存在keyboard.type方法，支持键盘事件</li><li>获取手机标题列表：页面对象存在$$eval方法，传入选择器，回传对应的DOM</li></ul><h5 id="实战-2">实战 <a class="markdownIt-Anchor" href="#实战-2">#</a></h5><p>我们先在仓库根目录下新建一个第一天实战的目录及文件<code>1.puppertee/3.js</code>（在git bash中可以直接执行如下命令）</p><pre class="hljs"><code>touch 3.js
</code></pre><p>然后实现如下内容即可</p><pre class="hljs"><code><span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;puppeteer&quot;</span>);
(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.launch({ <span class="hljs-attr">headless</span>: <span class="hljs-literal">false</span> }); <span class="hljs-comment">//启动浏览器</span>
  <span class="hljs-keyword">let</span> page = <span class="hljs-keyword">await</span> browser.newPage(); <span class="hljs-comment">//创建一个 Page 实例</span>
  <span class="hljs-keyword">await</span> page.setJavaScriptEnabled(<span class="hljs-literal">true</span>); <span class="hljs-comment">//启用javascript</span>
  <span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">&quot;https://www.jd.com/&quot;</span>);
  <span class="hljs-keyword">const</span> searchInput = <span class="hljs-keyword">await</span> page.$(<span class="hljs-string">&quot;#key&quot;</span>); <span class="hljs-comment">//获取元素</span>
  <span class="hljs-keyword">await</span> searchInput.focus(); <span class="hljs-comment">//定位到搜索框</span>
  <span class="hljs-keyword">await</span> page.keyboard.type(<span class="hljs-string">&quot;手机&quot;</span>); <span class="hljs-comment">//输入手机</span>
  <span class="hljs-keyword">const</span> searchBtn = <span class="hljs-keyword">await</span> page.$(<span class="hljs-string">&quot;.button&quot;</span>);
  <span class="hljs-keyword">await</span> searchBtn.click();
  <span class="hljs-keyword">await</span> page.waitForSelector(<span class="hljs-string">&quot;.gl-item&quot;</span>); <span class="hljs-comment">//等待元素加载之后，否则获取不了异步加载的元素</span>
  <span class="hljs-keyword">const</span> links = <span class="hljs-keyword">await</span> page.$$eval(
    <span class="hljs-string">&quot;.gl-item &gt; .gl-i-wrap &gt; .p-img &gt; a&quot;</span>,
    <span class="hljs-function">(<span class="hljs-params">links</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> links.map(<span class="hljs-function">(<span class="hljs-params">a</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">href</span>: a.href.trim(),
          <span class="hljs-attr">title</span>: a.title,
        };
      });
    }
  );
  <span class="hljs-built_in">console</span>.log(links);
})();
</code></pre><p>执行如下命令查看效果</p><pre class="hljs"><code>node 3.js
</code></pre><h5 id="实现效果如下-2">实现效果如下 <a class="markdownIt-Anchor" href="#实现效果如下-2">#</a></h5><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2tcz2xze2g218k0u0gtb.gif" alt="2022-06-02 03.32.53" style="zoom:33%;"><h2 id="课后作业用于感兴趣同学的拔高">课后作业：用于感兴趣同学的拔高 <a class="markdownIt-Anchor" href="#课后作业用于感兴趣同学的拔高">#</a></h2><ul><li>我们已经可以利用puppeteer实现模拟用户动作（写入手机并触发搜索），那如果我们要拿返回信息跳转详情并爬取详情信息呢？请试试</li></ul></div><div dir="ltr" class="level article-bar is-mobile"><div class="level-item has-text-centered"><a title="previous page" class="previouse-article-link" href="../前端爬虫/index.html"><span class="icon icon-previous" data-icon="previous"></span><span class="link-content">&laquo; Previous</span></a></div><div class="level-item has-text-centered"><a title="font size" class="link-item link-item-size"><span class="icon icon-size" data-icon="size"></span></a></div><div class="level-item has-text-centered"><a title="table of content" class="link-item link-item-toc"><span class="icon icon-toc" data-icon="toc"></span></a></div><div class="level-item has-text-centered"><a title="top" href="#"><span class="icon icon-up" data-icon="up"></span> <span class="link-content">⤊ Top</span></a></div><div class="level-item has-text-centered"><a title="next page" class="next-article-link" href="../前端爬虫/2. 数据入库.html"><span class="icon icon-next" data-icon="next"></span><span class="link-content">Next &raquo;</span></a></div></div></div><div class="column is-2-widescreen is-hidden"></div></div><div class="columns foot"><div class="column is-3 is-offset-9 build-by">Build by <a href="https://github.com/ruanyf/loppo" target="_blank">Loppo</a> 0.6.24</div></div><div class="book-toc notification is-warning is-hidden"><h3>Table of chapters &nbsp;<span class="title-close"><a class="button is-danger"> Close</a></span></h3><ul class="chapter-area"><li class="chapter-item"><a href="../shell编程训练营/index.html">shell编程训练营</a>&nbsp;<a class="first-level-collapse"><span class="icon icon-expand" data-icon="expand"></span></a></li><ul class="chapter-level-1"><li class="chapter-item"><a href="../shell编程训练营/1. Shell 的基本介绍、常用命令以及 Shell 的流程控制.html">我们为什么要学习shell</a></li><li class="chapter-item"><a href="../shell编程训练营/2. Shell 中的数组应用、参数处理和函数的应用.html">shell之语句</a></li><li class="chapter-item"><a href="../shell编程训练营/3. Shell 的函数、模块化、公共函数库.html">shell之函数</a></li><li class="chapter-item"><a href="../shell编程训练营/4. Shell周边：语言特殊点调试 Debug 方案vscode对shell的支持.html">语言特殊点</a></li><li class="chapter-item"><a href="../shell编程训练营/开营前置信息.html">开营前置信息.md</a></li></ul><li class="chapter-item"><a href="../vscode训练营/index.html">vscode训练营</a>&nbsp;<a class="first-level-collapse"><span class="icon icon-expand" data-icon="expand"></span></a></li><ul class="chapter-level-1"><li class="chapter-item"><a href="../vscode训练营/day1：简单了解插件开发.html">day1：简单了解插件开发.md</a></li><li class="chapter-item"><a href="../vscode训练营/day2：实现一个简单代码工具.html">day2：实现一个简单代码工具.md</a></li><li class="chapter-item"><a href="../vscode训练营/day3：vscode配置文件.html">day3：vscode配置文件.md</a></li><li class="chapter-item"><a href="../vscode训练营/day4：完善工具，添加更多功能并发布.html">然后输入之前获取到的 token</a></li><li class="chapter-item"><a href="../vscode训练营/开营计划.html">开营计划.md</a></li></ul><li class="chapter-item"><a href="../webpack插件训练营/index.html">webpack插件训练营</a>&nbsp;<a class="first-level-collapse"><span class="icon icon-expand" data-icon="expand"></span></a></li><ul class="chapter-level-1"><li class="chapter-item"><a href="../webpack插件训练营/day1. 简单了解webpack.html">day1. 简单了解webpack.md</a></li><li class="chapter-item"><a href="../webpack插件训练营/day2. webpack配置文件拆分及开发环境搭建.html">day2. webpack配置文件拆分及开发环境搭建.md</a></li><li class="chapter-item"><a href="../webpack插件训练营/day3. 文件类型处理篇.html">day3. 文件类型处理篇.md</a></li><li class="chapter-item"><a href="../webpack插件训练营/day4. 性能分析篇.html">day4. 性能分析篇.md</a></li><li class="chapter-item"><a href="../webpack插件训练营/day5. 性能优化篇：体积优化.html">day5. 性能优化篇：体积优化.md</a></li><li class="chapter-item"><a href="../webpack插件训练营/day6. 性能优化篇：缓存.html">day6. 性能优化篇：缓存.md</a></li><li class="chapter-item"><a href="../webpack插件训练营/day7. webpack 核心工作流程.html">day7. webpack 核心工作流程.md</a></li><li class="chapter-item"><a href="../webpack插件训练营/day8. 熟悉插件和loader的发布流程.html">day8. 熟悉插件和loader的发布流程.md</a></li><li class="chapter-item"><a href="../webpack插件训练营/开营计划.html">开营计划.md</a></li><li class="chapter-item"><a href="../webpack插件训练营/提效技巧篇：px转rem.html">提效技巧篇：px转rem.md</a></li><li class="chapter-item"><a href="../webpack插件训练营/提效技巧篇：基于glob实现自动化路由的MPA.html">提效技巧篇：基于glob实现自动化路由的MPA.md</a></li><li class="chapter-item"><a href="../webpack插件训练营/提效技巧篇：浏览器前缀自动添加.html">提效技巧篇：浏览器前缀自动添加.md</a></li></ul><li class="chapter-item"><a href="../前端爬虫/index.html">前端爬虫</a>&nbsp;<a class="first-level-collapse"><span class="icon icon-collapse" data-icon="collapse"></span></a></li><ul class="chapter-level-1 chapter-level-1-current"><li class="chapter-item chapter-item-current"><a href="../前端爬虫/1. 了解爬虫 - puppetter实战.html">1. 了解爬虫 - puppetter实战.md</a></li><li class="chapter-item"><a href="../前端爬虫/2. 数据入库.html">2. 数据入库.md</a></li><li class="chapter-item"><a href="../前端爬虫/3. 展示应用实现.html">3. 展示应用实现.md</a></li><li class="chapter-item"><a href="../前端爬虫/4. 实战：kkb一键爬取所有vip课程.html">4. 实战：kkb一键爬取所有vip课程.md</a></li><li class="chapter-item"><a href="../前端爬虫/开营计划.html">开营计划.md</a></li></ul></ul><li class="chapter-item"><a href="../学习小组规划.html">学习小组规划.md</a></li><li class="chapter-item"><a href="../开营计划.html">开营计划.md</a></li><li class="chapter-item"><a href="../模板.html">模板.md</a></li><li class="chapter-item"><a href="../谷歌浏览器插件/index.html">谷歌浏览器插件</a>&nbsp;<a class="first-level-collapse"><span class="icon icon-expand" data-icon="expand"></span></a></li><ul class="chapter-level-1"><li class="chapter-item"><a href="../谷歌浏览器插件/开营计划.html">开营计划.md</a></li></ul></div><div class="progress-indicator"></div><!-- SCRIPTS --><script>var LOPPO={current_path:"前端爬虫/1. 了解爬虫 - puppetter实战.md",relative_root_path:"../",article_toc:'<ul class="markdownIt-TOC">\n<li><a href="#%E6%80%8E%E4%B9%88%E5%81%9A%E5%88%B0%E5%B0%BD%E5%8F%AF%E8%83%BD%E5%81%9A%E5%88%B0%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E5%B0%B1%E8%83%BD%E6%9C%89%E6%88%90%E6%9E%9C">怎么做到：尽可能做到复制粘贴就能有成果</a>\n<ul>\n<li><a href="#%E4%BC%A0%E7%BB%9F%E7%88%AC%E8%99%AB%E6%80%8E%E4%B9%88%E5%B7%A5%E4%BD%9C%E7%9A%84%E5%88%A9%E7%94%A8request%E5%8C%85%E7%88%AC%E5%8F%96%E6%8E%98%E9%87%91%E5%89%8D%E7%AB%AF%E6%A0%87%E7%AD%BE%E4%B8%8B%E7%9A%84%E9%A6%96%E9%A1%B5%E6%89%80%E6%9C%89%E6%96%87%E7%AB%A0%E6%A0%87%E9%A2%98">传统爬虫怎么工作的：利用request包爬取掘金前端标签下的首页所有文章标题</a></li>\n<li><a href="#%E5%89%8D%E7%AB%AF%E7%88%AC%E8%99%AB%E9%9D%A2%E5%90%91%E7%9A%84%E9%97%AE%E9%A2%98%E5%89%8D%E7%AB%AF%E6%B8%B2%E6%9F%93%E5%AF%BC%E8%87%B4%E4%BC%A0%E7%BB%9F%E7%88%AC%E8%99%AB%E6%97%A0%E6%B3%95%E6%8A%93%E5%8F%96%E5%88%B0%E6%95%B0%E6%8D%AE">前端爬虫面向的问题：前端渲染导致传统爬虫无法抓取到数据</a></li>\n<li><a href="#%E5%89%8D%E7%AB%AF%E7%88%AC%E8%99%AB%E6%80%8E%E4%B9%88%E5%B7%A5%E4%BD%9C%E7%9A%84%E5%88%A9%E7%94%A8puppetter%E5%AF%B9%E7%99%BE%E5%BA%A6%E5%AE%98%E7%BD%91%E8%BF%9B%E8%A1%8C%E6%88%AA%E5%9B%BE">前端爬虫怎么工作的：利用puppetter对百度官网进行截图</a></li>\n<li><a href="#%E5%89%8D%E7%AB%AF%E7%88%AC%E8%99%AB%E6%80%8E%E4%B9%88%E5%B7%A5%E4%BD%9C%E7%9A%84%E5%88%A9%E7%94%A8puppetter%E7%88%AC%E5%8F%96%E4%BA%AC%E4%B8%9C%E6%A8%A1%E6%8B%9F%E6%90%9C%E7%B4%A2%E5%AE%9E%E7%8E%B0%E7%88%AC%E5%8F%96%E4%BA%AC%E4%B8%9C%E6%89%8B%E6%9C%BA%E5%88%97%E8%A1%A8">前端爬虫怎么工作的：利用puppetter爬取京东，模拟搜索实现爬取京东手机列表</a></li>\n</ul>\n</li>\n<li><a href="#%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A%E7%94%A8%E4%BA%8E%E6%84%9F%E5%85%B4%E8%B6%A3%E5%90%8C%E5%AD%A6%E7%9A%84%E6%8B%94%E9%AB%98">课后作业：用于感兴趣同学的拔高</a></li>\n</ul>\n'}</script><script src="../assets/js/app.js"></script></body></html>